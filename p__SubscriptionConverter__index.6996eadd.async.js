"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[271],{3876:function(Ze,B,a){a.r(B),a.d(B,{default:function(){return be}});var G=a(60727),X=a(30279),F=a.n(X),k=a(46686),C=a.n(k),U=a(42857),H=a(38142),v=a(88106),Q=a(37300),x=a(70836),W=a(62081),J=a(31307),K=a(38619),Y=a(19803),w=a.n(Y),q=a(79014),_=a(64972),i=a(59496),ee=a(41082),A=a(41355),Z=U.Z.Option;function L(l){return l&&l.type&&(l.type.isSelectOption||l.type.isSelectOptGroup)}var re=function(r,t){var s=r.prefixCls,e=r.className,u=r.children,f=r.dataSource,o=(0,q.Z)(u),c;if(o.length===1&&(0,A.l$)(o[0])&&!L(o[0])){var p=(0,K.Z)(o,1);c=p[0]}var S=c?function(){return c}:void 0,m;return o.length&&L(o[0])?m=u:m=f?f.map(function(d){if((0,A.l$)(d))return d;switch((0,J.Z)(d)){case"string":return i.createElement(Z,{key:d,value:d},d);case"object":{var h=d.value;return i.createElement(Z,{key:h,value:h},d.text)}default:return}}):[],i.createElement(ee.C,null,function(d){var h=d.getPrefixCls,g=h("select",s);return i.createElement(U.Z,(0,W.Z)({ref:t},(0,_.Z)(r,["dataSource"]),{prefixCls:g,className:w()("".concat(g,"-auto-complete"),e),mode:U.Z.SECRET_COMBOBOX_MODE_DO_NOT_USE},{getInputElement:S}),m)})},T=i.forwardRef(re);T.Option=Z;var R=T,te=a(57836),I=a(189),ne=a(35290),b=a.n(ne),ae=a(411),D=a.n(ae),y={clash:"Clash",clashr:"ClashR",quan:"Quantumult",quanx:"QuantumultX",loon:"Loon",ss:"SS (SIP002)",sssub:"SS Android",ssd:"SSD",ssr:"SSR",surfboard:"Surfboard","surge&ver=2":"Surge2","surge&ver=3":"Surge3","surge&ver=4":"Surge4",v2ray:"V2Ray"},P=function(){var r=location.pathname;return r.endsWith("/")?r.substring(0,r.length-1):r},ue=function(){var l=D()(b()().mark(function r(){var t;return b()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(P(),"/rule-list.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},r)}));return function(){return l.apply(this,arguments)}}(),le=function(){var l=D()(b()().mark(function r(){var t;return b()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(P(),"/backend-list.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},r)}));return function(){return l.apply(this,arguments)}}(),se=function(){var r=(0,i.useState)([]),t=C()(r,2),s=t[0],e=t[1];return(0,i.useEffect)(function(){var u=!1,f=[{value:window.location.origin+"/sub"}];return e(f),le().then(function(o){u||e(f.concat(o))}),function(){u=!0}},[]),s},oe=se,ie=function(){var r=(0,i.useState)([]),t=C()(r,2),s=t[0],e=t[1];return(0,i.useEffect)(function(){var u=!1;return ue().then(function(f){u||e(f)}),function(){u=!0}},[]),s},ce=ie,de=function(r){var t=r.get("target");if(!t)return null;if(!y.hasOwnProperty(t)){var s=r.get("ver");if(!s||(t="".concat(t,"&ver=").concat(s),!y.hasOwnProperty(t)))return null}return t},ve=function(r){var t=r.backendUrl,s=r.targetType,e=r.sourceUrls,u=r.ruleUrl,f=r.filename,o=r.enableUdp,c=r.exclude,p=encodeURIComponent(e.split(/[\n|]/).map(function(d){return d.trim()}).filter(function(d){return d}).join("|")),S=encodeURIComponent(u),m="".concat(t,"?target=").concat(s,"&url=").concat(p,"&config=").concat(S);return f&&(m+="&filename=".concat(f)),c&&(m+="&exclude=".concat(encodeURIComponent(c))),o&&(m+="&udp=".concat(o)),m},fe=function(r){var t,s=new URL(r),e=s.searchParams,u={backendUrl:"".concat(s.origin).concat(s.pathname)},f=de(e);f&&(u.targetType=f);var o=(t=e.get("url"))===null||t===void 0?void 0:t.replaceAll("|",`
`);o&&(u.sourceUrls=o);var c=e.get("config");c&&(u.ruleUrl=c);var p=e.get("filename");p&&(u.filename=p);var S=e.get("exclude");S&&(u.exclude=S);var m=e.get("udp");return(m==="true"||m==="false")&&(u.enableUdp=m),u},N=a(84045),me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]},name:"api",theme:"outlined"},pe=me,he=a(38119),$=function(r,t){return i.createElement(he.Z,(0,N.Z)((0,N.Z)({},r),{},{ref:t,icon:pe}))};$.displayName="ApiOutlined";var ge=i.forwardRef($),E={tailButtonContainer:"tailButtonContainer___ZcOHp",tailButton:"tailButton___XHdRn"},n=a(4637),V={labelCol:{xs:{span:5},sm:{span:5},md:{span:4}},wrapperCol:{xs:{span:17},sm:{span:17},md:{span:18}}},Fe={wrapperCol:{span:24}},z=function(r,t){return t?t.label?t.label.toUpperCase().includes(r.toUpperCase()):t.value.includes(r):!1},Ue=function(r,t){var s=C()(r,2),e=s[0],u=s[1];return(0,n.jsx)(U.Z.Option,{value:e,children:u},t)},Se=function(){H.ZP.warning("\u656C\u8BF7\u671F\u5F85")},Ce=function(r){console.debug("Subconverter render");var t=v.Z.useForm(),s=C()(t,1),e=s[0],u=v.Z.useForm(),f=C()(u,1),o=f[0],c=oe(),p=ce();(0,i.useEffect)(function(){c[0]&&!e.getFieldValue("backendUrl")&&e.setFieldsValue({backendUrl:c[0].value})},[e,c]),(0,i.useEffect)(function(){p[0]&&!e.getFieldValue("ruleUrl")&&e.setFieldsValue({ruleUrl:p[0].value})},[e,p]);var S=(0,i.useMemo)(function(){var h,g,j={targetType:"clash"},O=(h=c[0])===null||h===void 0?void 0:h.value;O&&(j.backendUrl=O);var M=(g=p[0])===null||g===void 0?void 0:g.value;return M&&(j.ruleUrl=M),j},[c,p]),m=(0,i.useCallback)(function(){e.validateFields().then(function(h){var g=ve(h);o.setFieldsValue({subscriptionUrl:g})}).catch(function(){return console.error("\u8BA2\u9605\u94FE\u63A5\u751F\u6210\u9519\u8BEF\uFF01")})},[e,o]),d=(0,i.useCallback)(function(h){var g=h.target.value;try{var j=fe(g);e.setFieldsValue(j)}catch{console.error("\u9519\u8BEF\u7684\u8BA2\u9605\u94FE\u63A5\uFF01")}},[e]);return(0,n.jsxs)(Q.Z,F()(F()({},r),{},{title:"Subscription Converter",children:[(0,n.jsxs)(v.Z,F()(F()({},V),{},{form:e,initialValues:S,children:[(0,n.jsx)(v.Z.Item,{label:"\u8BA2\u9605\u94FE\u63A5",name:"sourceUrls",rules:[{required:!0,message:"\u8BA2\u9605\u94FE\u63A5\u4E0D\u53EF\u4E3A\u7A7A"}],children:(0,n.jsx)(x.Z.TextArea,{placeholder:"\u8BF7\u8F93\u5165\u8BA2\u9605\u94FE\u63A5\u5730\u5740",rows:3,allowClear:!0})}),(0,n.jsx)(v.Z.Item,{label:"\u76EE\u6807\u7C7B\u578B",name:"targetType",rules:[{required:!0,message:"\u76EE\u6807\u7C7B\u578B\u4E0D\u53EF\u4E3A\u7A7A"}],children:(0,n.jsx)(U.Z,{children:Object.entries(y).map(Ue)})}),(0,n.jsx)(v.Z.Item,{label:"\u540E\u7AEF\u5730\u5740",name:"backendUrl",rules:[{required:!0,message:"\u540E\u7AEF\u5730\u5740\u4E0D\u53EF\u4E3A\u7A7A"}],children:(0,n.jsx)(R,{placeholder:"\u8BF7\u8F93\u5165\u540E\u7AEF\u670D\u52A1\u5668\u5730\u5740",options:c,allowClear:!0,filterOption:z})}),(0,n.jsx)(v.Z.Item,{label:"\u89C4\u5219\u5730\u5740",name:"ruleUrl",rules:[{required:!0,message:"\u89C4\u5219\u5730\u5740\u4E0D\u53EF\u4E3A\u7A7A"}],children:(0,n.jsx)(R,{placeholder:"\u8BF7\u8F93\u5165\u8FDC\u7A0B\u89C4\u5219\u5730\u5740",options:p,allowClear:!0,filterOption:z})}),(0,n.jsx)(v.Z.Item,{label:"\u6587\u4EF6\u540D\u79F0",name:"filename",children:(0,n.jsx)(x.Z,{placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D\u79F0",allowClear:!0})}),(0,n.jsx)(v.Z.Item,{label:"\u6392\u9664\u8282\u70B9",name:"exclude",children:(0,n.jsx)(x.Z,{placeholder:"\u8BF7\u8F93\u5165\u6392\u9664\u8282\u70B9\u5173\u952E\u5B57\uFF0C\u652F\u6301\u6B63\u5219",allowClear:!0})}),(0,n.jsx)(v.Z.Item,{label:"\u542F\u7528 UDP",name:"enableUdp",children:(0,n.jsxs)(U.Z,{placeholder:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528 UDP",allowClear:!0,children:[(0,n.jsx)(U.Z.Option,{value:"true",children:"\u5F00\u542F"}),(0,n.jsx)(U.Z.Option,{value:"false",children:"\u5173\u95ED"})]})})]})),(0,n.jsx)(te.Z,{children:(0,n.jsx)(ge,{})}),(0,n.jsxs)(v.Z,F()(F()({},V),{},{form:o,children:[(0,n.jsx)(v.Z.Item,{label:"\u8BA2\u9605\u94FE\u63A5",name:"subscriptionUrl",children:(0,n.jsx)(x.Z,{onChange:d})}),(0,n.jsx)(v.Z.Item,{label:"\u8BA2\u9605\u77ED\u94FE",name:"shortSubscriptionUrl",children:(0,n.jsx)(x.Z,{})})]})),(0,n.jsx)(v.Z,F()(F()({},Fe),{},{children:(0,n.jsx)(v.Z.Item,{children:(0,n.jsxs)("div",{className:E.tailButtonContainer,children:[(0,n.jsx)(I.Z,{className:E.tailButton,type:"primary",onClick:m,children:"\u751F\u6210\u94FE\u63A5"}),(0,n.jsx)(I.Z,{className:E.tailButton,type:"primary",onClick:Se,children:"\u751F\u6210\u77ED\u94FE"})]})})}))]}))},xe=Ce,je=function(){return(0,n.jsx)(G._z,{children:(0,n.jsx)(xe,{})})},be=je}}]);
